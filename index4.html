<html>
<body>
<script src='wsHook.js'></script>
<script>
  wsHook.before = function(data, url, wsObject) {
    console.log("Sending message to " + url + " : " + data);
}

// Make sure your program calls `wsClient.onmessage` event handler somewhere.
wsHook.after = function(messageEvent, url, wsObject) {
    console.log("Received message from " + url + " : " + messageEvent.data);
    return messageEvent;
}

// if you do not want to propagate the MessageEvent further down, just return null
wsHook.after = function(messageEvent, url, wsObject) {
 console.log("Received message from " + url + " : " + messageEvent.data);
 // This example can ping-pong forever, so maybe use some conditions
 wsObject.send("Intercepted and sent again")
 return null;
}

var wsClient = new WebSocket("wss://ptl-5c420896b0f1-3eb56d5b4e89.libcurl.me/getkey");
wsClient.onopen = function () {
  wsClient.send("Echo this");
}

wsClient.onmessage = function(e){
  console.log(e);
}

</script>
  
</body>
</html>
